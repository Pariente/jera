<div class="content-flex">
  <%= link_to destroy_user_session_path, method: :delete do %>
    Sign Out
  <% end %>
  <% @harvest.each do |e| %>
    <div class="content">
      <div class="content-left-column">
        <%= link_to source_path(e.source) do %>
          <%= image_tag e.source.picture, class: 'source-pic' %>
        <% end %>
      </div>
      <div class="content-right-column">
        <div class="content-top">
          <div class="source-title">
              <%= link_to source_path(e.source) do %>
                <%= e.source.name %>
              <% end %>
          </div>
          <div class="time-published"><%= distance_of_time_in_words(e.published_date.to_time, Time.now) %> ago</div>
        </div>
        <div class="content-box">
          <%= link_to e.media_url, target: :blank, class: 'content-anchor' do %>
            <%= image_tag e.thumbnail_url, class: 'content-thumbnail' %>
            <p class="content-title"><%= e.title %></p>
          <% end %>
          <p class="content-desc"><%= truncate(e.content, length: 200) %><p>
          <% if e.pickings.where(user: current_user) == [] %>
            <%= link_to new_entry_picking_path(e), remote: :true do %>
              <button class="pick-entry">
                <span>Pick</span>
              </button>
            <% end %>
          <% else %>
            <%= link_to entry_picking_path(e, id: e.pickings.where(user: current_user).first.id), remote: :true, method: :delete do %>
              <button class="picked-entry">
                <%= image_tag 'check', class: "check" %>
                <span>Picked</span>
              </button>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
</div>

<%= link_to "Sign out", destroy_user_session_path, method: :delete %>
<%= render partial: 'shared/footer' %>